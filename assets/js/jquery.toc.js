!function(e){e.fn.toc=function(o){var t=e.extend({noBackToTopLinks:!1,title:"Article directory",minimumHeaders:2,headers:"h1, h2, h3, h4, h5, h6",listType:"ul",showEffect:"show",showSpeed:0},o);function n(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)})}var s=e(t.headers).filter(function(){var o=e(this).prev().attr("name");return!this.id&&o&&(this.id=e(this).attr("id",o.replace(/\./g,"-"))),this.id}),c=e(this);if(!s.length||s.length<t.minimumHeaders||!c.length)return e(this).hide(),void e(".post-directory-title").css("display","none");0===t.showSpeed&&(t.showEffect="none");var r,l={show:function(){c.hide().html(p).show(t.showSpeed)},slideDown:function(){c.hide().html(p).slideDown(t.showSpeed)},fadeIn:function(){c.hide().html(p).fadeIn(t.showSpeed)},none:function(){c.html(p)}},a=function(e){return parseInt(e.nodeName.replace("H",""),10)},d=s.map(function(e,o){return a(o)}).get().sort()[0],h=a(s[0]),p='<p><strong class="toc-title">'+t.title+"</strong></p>\n";p+=" <"+t.listType+' class="toc">',s.on("click",function(){t.noBackToTopLinks||(window.location.hash=this.id)}).addClass("clickable-header").each(function(o,s){if(r=a(s),t.noBackToTopLinks||r!==d||e(s).addClass("top-level-header").after('<i class="icon-arrow-up back-to-top"> </i>'),r===h)p+='<li class="toc-item toc-level-'+r+'">',p+='<a class="jumper" href=\'#'+n(s.id)+"'>",p+="<span class='toc-text'>"+s.innerHTML+"</span>",p+="</a>";else if(r<=h){for(i=r;i<h;i++)p+="</li></"+t.listType+">";p+="<li class='toc-item toc-level-"+r+"'><a class=\"jumper\" href='#"+n(s.id)+"'>",p+="<span class='toc-text'>"+s.innerHTML+"</span>",p+="</a>"}else if(r>h){for(i=r;i>h;i--)p+="<"+t.listType+" class='toc-child'><li class='toc-item toc-level-"+i+"'>";p+='<a class="jumper" href=\'#'+n(s.id)+"'>",p+="<span class='toc-text'>"+s.innerHTML+"</span>",p+="</a>"}h=r}),p+="</"+t.listType+">",t.noBackToTopLinks||e(document).on("click",".back-to-top",function(){e(window).scrollTop(0),window.location.hash=""}),l[t.showEffect]()}}(jQuery),$(document).ready(function(){$(".post-directory").toc();var e=$("#post-directory-module").offset().top,o=$(".clickable-header"),t=[],i=function(){t=[],o.each(function(e,o){t.push(o.offsetTop)})};i(),$(window).bind("load",i);var n=function(){var e=0,o=t.length,i=$(window).scrollTop();if(i+60>t[o-1])e=o;else for(var n=0;n<o;n++)if(i+60<=t[n]){e=n;break}0==e&&(e+=1),$(".toc-item .jumper").removeClass("on"),$(".toc-item .jumper").eq(e-1).addClass("on")};n();var s=function(){var e=document.documentElement.clientHeight;e=e||"auto",$(".post-directory").css("max-height",e)};$(window).scroll(function(){$(window).scrollTop()>=e?($("#post-directory-module").css({top:"0",position:"fixed",width:"inherit"}),$(".post-directory").css("overflow","auto")):($("#post-directory-module").css({position:"inherit",width:"inherit"}),$(".post-directory").css("overflow","hidden"),$(".post-directory").scrollTop(0)),n()}),s(),$(window).on("resize",function(){s()})}),$(".jumper").on("click",function(e){e.preventDefault(),$("body, html").animate({scrollTop:$($(this).attr("href")).offset().top},600)});